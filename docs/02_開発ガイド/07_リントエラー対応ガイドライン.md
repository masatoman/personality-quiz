# リントエラー対応ガイドライン

## 1. 問題の背景

リントエラーの修正が無限ループに陥るケースが発生しています。主な原因として以下が特定されています：

- 型の不整合による連鎖的な修正
- 依存関係の循環参照
- 一貫性のない修正アプローチ
- 根本原因の特定不足

## 2. 対応方針

### 2.1 修正前の分析

1. **エラーの分類**
   - 型の不整合
   - 未使用変数・インポート
   - コーディング規約違反
   - パフォーマンス関連

2. **影響範囲の特定**
   - 直接的な依存関係
   - 間接的な依存関係
   - 型定義への影響

3. **優先順位付け**
   - クリティカルなエラー（型安全性）
   - コード品質に関するエラー
   - スタイルに関するエラー

### 2.2 修正手順

1. **段階的アプローチ**
   ```mermaid
   graph TD
     A[エラー発生] --> B[エラーの分類]
     B --> C[影響範囲の特定]
     C --> D[修正計画の立案]
     D --> E[段階的な修正]
     E --> F[テスト実行]
     F --> G{新規エラーの発生}
     G -->|Yes| H[根本原因分析]
     H --> D
     G -->|No| I[完了]
   ```

2. **修正の優先順位**
   1. 型定義の整備
   2. 未使用コードの削除
   3. インターフェースの統一
   4. コーディング規約の適用

3. **修正の制限**
   - 1ファイルあたりの修正回数を3回までに制限
   - 3回を超える場合は要因分析を実施

### 2.3 品質管理

1. **レビュー基準**
   - 型の整合性
   - 依存関係の妥当性
   - テストカバレッジ
   - パフォーマンスへの影響

2. **テスト要件**
   - 単体テストの追加・更新
   - 統合テストの実施
   - E2Eテストの確認

## 3. 予防措置

### 3.1 開発プロセスの改善

1. **事前チェック**
   - PRテンプレートにリントチェック項目を追加
   - 自動リント実行の導入
   - 型チェックの強化

2. **レビュープロセス**
   - 依存関係の確認
   - 型定義の妥当性確認
   - 修正履歴の確認

### 3.2 モニタリング

1. **メトリクス収集**
   - リントエラーの発生頻度
   - 修正に要した時間
   - 再発率

2. **定期的な分析**
   - パターンの特定
   - 効果測定
   - プロセスの改善

## 4. トラブルシューティング

### 4.1 無限ループの検出

以下の兆候が見られた場合、無限ループの可能性があります：

- 同じファイルへの3回以上の修正
- 循環的な依存関係の修正
- 型エラーの連鎖的な発生

### 4.2 対処方法

1. **即時対応**
   - 修正作業の一時停止
   - 現状の記録
   - チーム内での共有

2. **原因分析**
   - 依存関係の可視化
   - 型定義の見直し
   - 修正履歴の確認

3. **解決策の検討**
   - アーキテクチャの見直し
   - 型定義の再設計
   - テスト戦略の改善

## 5. チェックリスト

### 5.1 修正前

- [ ] エラーの種類を特定
- [ ] 影響範囲を把握
- [ ] 依存関係を確認
- [ ] 修正計画を立案

### 5.2 修正中

- [ ] 1ファイルあたりの修正回数を記録
- [ ] 新規エラーの発生を監視
- [ ] テストの実行
- [ ] レビューの実施

### 5.3 修正後

- [ ] 全テストの成功を確認
- [ ] 依存関係の整合性を確認
- [ ] パフォーマンスへの影響を確認
- [ ] ドキュメントの更新 