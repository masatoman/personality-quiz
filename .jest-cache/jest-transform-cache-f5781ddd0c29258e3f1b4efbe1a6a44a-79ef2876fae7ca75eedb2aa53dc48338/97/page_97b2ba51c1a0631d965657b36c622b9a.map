{"version":3,"sources":["/Users/master/Local Sites/testcursor/src/app/materials/[id]/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { useParams, useRouter } from 'next/navigation';\nimport { FaStar, FaRegStar, FaUser, FaClock, FaBook, FaThumbsUp, FaComment, FaArrowLeft, FaChevronRight } from 'react-icons/fa';\nimport { FaRegThumbsUp, FaBookmark, FaRegBookmark } from 'react-icons/fa';\n\n// 教材データの型定義\ntype Material = {\n  id: string;\n  title: string;\n  description: string;\n  content: string;\n  category: string;\n  difficulty: 'beginner' | 'intermediate' | 'advanced';\n  author: {\n    id: string;\n    name: string;\n    avatar: string;\n    giverScore: number;\n    type: 'ギバー' | 'マッチャー' | 'テイカー';\n  };\n  created_at: string;\n  view_count: number;\n  rating: number;\n  is_bookmarked: boolean;\n  is_published: boolean;\n  tags: string[];\n}\n\n// 評価・コメントの型定義\ntype Feedback = {\n  id: string;\n  user_id: string;\n  user_name: string;\n  user_avatar: string;\n  rating: number;\n  comment: string;\n  created_at: string;\n}\n\n// 関連教材の型定義\ntype RelatedMaterial = {\n  id: string;\n  title: string;\n  category: string;\n  difficulty: string;\n  rating: number;\n  author_name: string;\n}\n\nconst MaterialDetailPage = () => {\n  const params = useParams();\n  const router = useRouter();\n  const materialId = params.id as string;\n\n  const [material, setMaterial] = useState<Material | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [feedbacks, setFeedbacks] = useState<Feedback[]>([]);\n  const [relatedMaterials, setRelatedMaterials] = useState<RelatedMaterial[]>([]);\n  const [isBookmarked, setIsBookmarked] = useState(false);\n  const [userRating, setUserRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    // 教材データの取得（実際はSupabaseから取得）\n    const fetchMaterial = async () => {\n      setLoading(true);\n      try {\n        // モックデータを使用（実際はAPIから取得）\n        const mockMaterial: Material = {\n          id: materialId,\n          title: 'ビジネス英語：互恵的関係の構築',\n          description: 'ビジネスシーンで互恵的な関係を構築するための英語表現とコミュニケーション戦略を学びます。',\n          content: `\n          <h2>互恵的関係とは</h2>\n          <p>互恵的関係（reciprocal relationship）とは、双方が利益を得られる関係性のことです。ビジネスにおいて、長期的かつ持続可能なパートナーシップを築くためには、この互恵性が不可欠です。</p>\n          \n          <h3>キーポイント</h3>\n          <ul>\n            <li>信頼関係の構築（Building Trust）</li>\n            <li>価値の交換（Exchange of Value）</li>\n            <li>長期的視点（Long-term Perspective）</li>\n          </ul>\n          \n          <h2>役立つ英語表現</h2>\n          \n          <h3>1. 関係構築のための表現</h3>\n          <div class=\"example-box\">\n            <p>\"I believe we can create a win-win situation here.\"</p>\n            <p>（ここでは双方にとって良い状況を作れると思います。）</p>\n          </div>\n          \n          <div class=\"example-box\">\n            <p>\"We're looking for a long-term partnership that benefits both parties.\"</p>\n            <p>（私たちは双方に利益をもたらす長期的なパートナーシップを求めています。）</p>\n          </div>\n          \n          <h3>2. 価値提案の表現</h3>\n          <div class=\"example-box\">\n            <p>\"What we bring to the table is...\"</p>\n            <p>（私たちが提供できるのは...）</p>\n          </div>\n          \n          <div class=\"example-box\">\n            <p>\"In return for your expertise, we can offer...\"</p>\n            <p>（あなたの専門知識に対して、私たちは...を提供できます。）</p>\n          </div>\n          \n          <h3>3. 協力の提案</h3>\n          <div class=\"example-box\">\n            <p>\"How can we support each other's goals?\"</p>\n            <p>（どのようにお互いの目標をサポートできるでしょうか？）</p>\n          </div>\n          \n          <div class=\"example-box\">\n            <p>\"I see potential synergies between our companies.\"</p>\n            <p>（私たちの会社間に潜在的な相乗効果を見ています。）</p>\n          </div>\n          \n          <h2>実践エクササイズ</h2>\n          <p>次のシナリオに基づいて、互恵的関係を構築するための会話を練習してみましょう：</p>\n          \n          <div class=\"scenario-box\">\n            <p><strong>シナリオ：</strong> あなたは小規模なデザイン会社の代表です。大手企業のマーケティング部門と会議を持ち、潜在的なコラボレーションについて話し合います。彼らはブランドの刷新を検討していますが、予算に制約があります。あなたの会社は露出を必要としています。互恵的な提案をしてください。</p>\n          </div>\n          `,\n          category: 'business',\n          difficulty: 'intermediate',\n          author: {\n            id: '550e8400-e29b-41d4-a716-446655440001',\n            name: 'ギバー太郎',\n            avatar: '/avatars/giver.png',\n            giverScore: 85,\n            type: 'ギバー'\n          },\n          created_at: '2023-09-15T10:30:00Z',\n          view_count: 234,\n          rating: 4.7,\n          is_bookmarked: false,\n          is_published: true,\n          tags: ['ビジネス英語', '交渉', 'コミュニケーション', '関係構築']\n        };\n\n        setMaterial(mockMaterial);\n        setIsBookmarked(mockMaterial.is_bookmarked);\n\n        // 評価・コメントのモックデータ\n        const mockFeedbacks: Feedback[] = [\n          {\n            id: 'f1',\n            user_id: '550e8400-e29b-41d4-a716-446655440002',\n            user_name: 'マッチャー花子',\n            user_avatar: '/avatars/matcher.png',\n            rating: 5,\n            comment: 'とても実践的な内容でした！実際のビジネスシーンで使える表現が多く学べました。特に「価値提案の表現」のセクションが役立ちました。',\n            created_at: '2023-10-05T14:25:00Z'\n          },\n          {\n            id: 'f2',\n            user_id: '550e8400-e29b-41d4-a716-446655440003',\n            user_name: 'テイカー次郎',\n            user_avatar: '/avatars/taker.png',\n            rating: 4,\n            comment: '全体的に良い内容でした。もう少し例文が多いと理解が深まると思います。それでも十分参考になりました。',\n            created_at: '2023-10-01T09:15:00Z'\n          }\n        ];\n        setFeedbacks(mockFeedbacks);\n\n        // 関連教材のモックデータ\n        const mockRelatedMaterials: RelatedMaterial[] = [\n          {\n            id: 'r1',\n            title: 'ポリートレスポンスガイド',\n            category: 'communication',\n            difficulty: 'beginner',\n            rating: 4.8,\n            author_name: 'ギバー太郎'\n          },\n          {\n            id: 'r2',\n            title: 'ビジネスミーティングでのプレゼンテーション術',\n            category: 'business',\n            difficulty: 'intermediate',\n            rating: 4.5,\n            author_name: 'マッチャー花子'\n          },\n          {\n            id: 'r3',\n            title: '英語でのネゴシエーション：基本戦略',\n            category: 'business',\n            difficulty: 'advanced',\n            rating: 4.9,\n            author_name: 'ギバー太郎'\n          }\n        ];\n        setRelatedMaterials(mockRelatedMaterials);\n      } catch (err) {\n        console.error('教材データの取得に失敗しました', err);\n        setError('教材データの取得に失敗しました。再度お試しください。');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (materialId) {\n      fetchMaterial();\n    }\n  }, [materialId]);\n\n  // ブックマーク切り替え\n  const toggleBookmark = () => {\n    setIsBookmarked(!isBookmarked);\n    // ここでSupabaseに状態を保存\n  };\n\n  // 評価送信\n  const submitFeedback = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (userRating === 0) {\n      alert('評価を選択してください');\n      return;\n    }\n\n    setSubmitting(true);\n    \n    // 実際はSupabaseに保存処理\n    setTimeout(() => {\n      const newFeedback: Feedback = {\n        id: `f${feedbacks.length + 1}`,\n        user_id: 'current-user-id',\n        user_name: 'あなた',\n        user_avatar: '/avatars/default.png',\n        rating: userRating,\n        comment: comment,\n        created_at: new Date().toISOString()\n      };\n\n      setFeedbacks([newFeedback, ...feedbacks]);\n      setUserRating(0);\n      setComment('');\n      setSubmitting(false);\n    }, 1000);\n  };\n\n  // 学習完了ボタン\n  const markAsCompleted = () => {\n    // 実際はSupabaseに完了ステータスを保存\n    alert('学習を完了しました！ポイントが加算されました。');\n    // router.push('/materials');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-10 bg-gray-200 rounded w-3/4 mb-4\"></div>\n          <div className=\"h-6 bg-gray-200 rounded w-1/2 mb-8\"></div>\n          <div className=\"h-40 bg-gray-200 rounded mb-6\"></div>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"h-40 bg-gray-200 rounded\"></div>\n            <div className=\"h-40 bg-gray-200 rounded\"></div>\n            <div className=\"h-40 bg-gray-200 rounded\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !material) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-4\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-red-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <p className=\"text-sm text-red-700\">{error || '教材が見つかりませんでした'}</p>\n            </div>\n          </div>\n        </div>\n        <button \n          onClick={() => router.back()}\n          className=\"mt-4 flex items-center text-blue-600 hover:text-blue-800\"\n        >\n          <FaArrowLeft className=\"mr-2\" /> 戻る\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      {/* 戻るボタン */}\n      <div className=\"mb-6\">\n        <button \n          onClick={() => router.back()}\n          className=\"flex items-center text-gray-600 hover:text-blue-600\"\n        >\n          <FaArrowLeft className=\"mr-2\" /> 一覧に戻る\n        </button>\n      </div>\n      \n      {/* 教材ヘッダー */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n        <div className=\"flex flex-wrap justify-between items-start\">\n          <div className=\"w-full md:w-3/4\">\n            <h1 className=\"text-3xl font-bold mb-3\">{material.title}</h1>\n            <div className=\"flex flex-wrap items-center gap-4 mb-4\">\n              <span className=\"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\">\n                {material.category === 'business' ? 'ビジネス英語' : \n                 material.category === 'communication' ? 'コミュニケーション' : material.category}\n              </span>\n              <span className=\"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\">\n                {material.difficulty === 'beginner' ? '初級' : \n                 material.difficulty === 'intermediate' ? '中級' : '上級'}\n              </span>\n              <div className=\"flex items-center text-yellow-500\">\n                {[...Array(5)].map((_, i) => (\n                  <span key={i}>\n                    {i < Math.floor(material.rating) ? <FaStar /> : \n                     i === Math.floor(material.rating) && material.rating % 1 > 0 ? <FaStar /> : <FaRegStar />}\n                  </span>\n                ))}\n                <span className=\"ml-1 text-gray-700\">{material.rating}</span>\n              </div>\n              <span className=\"text-gray-500 flex items-center\">\n                <FaUser className=\"mr-1\" /> 閲覧数: {material.view_count}\n              </span>\n            </div>\n            <p className=\"text-gray-700 mb-4\">{material.description}</p>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex items-center\">\n                <button \n                  onClick={toggleBookmark}\n                  className=\"flex items-center text-gray-600 hover:text-blue-600\"\n                >\n                  {isBookmarked ? <FaBookmark className=\"text-blue-500\" /> : <FaRegBookmark />}\n                  <span className=\"ml-1\">{isBookmarked ? 'ブックマーク中' : 'ブックマーク'}</span>\n                </button>\n              </div>\n              <div className=\"flex items-center text-gray-500\">\n                <FaClock className=\"mr-1\" /> \n                {new Date(material.created_at).toLocaleDateString('ja-JP')}\n              </div>\n            </div>\n          </div>\n          \n          {/* 作成者情報 */}\n          <div className=\"w-full md:w-1/4 mt-6 md:mt-0 md:text-right\">\n            <Link href={`/profile/${material.author.id}`} className=\"inline-block\">\n              <div className=\"flex items-center justify-end mb-2\">\n                <div className=\"mr-3\">\n                  <div className=\"font-medium\">{material.author.name}</div>\n                  <div className=\"text-sm text-gray-500\">{material.author.type}タイプ</div>\n                </div>\n                <div className=\"w-12 h-12 rounded-full bg-gray-200 overflow-hidden\">\n                  <img \n                    src={material.author.avatar || '/avatars/default.png'} \n                    alt={material.author.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n              </div>\n              <div className=\"text-sm\">\n                ギバースコア: <span className=\"font-bold text-blue-600\">{material.author.giverScore}</span>\n              </div>\n            </Link>\n          </div>\n        </div>\n      </div>\n      \n      {/* 教材コンテンツ */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n        <article className=\"prose prose-lg max-w-none\">\n          <div dangerouslySetInnerHTML={{ __html: material.content }} />\n        </article>\n        \n        {/* タグ一覧 */}\n        <div className=\"mt-8 pt-6 border-t border-gray-200\">\n          <h3 className=\"text-lg font-medium mb-3\">タグ</h3>\n          <div className=\"flex flex-wrap gap-2\">\n            {material.tags.map((tag, index) => (\n              <Link \n                key={index} \n                href={`/materials/tag/${encodeURIComponent(tag)}`}\n                className=\"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-sm text-gray-700\"\n              >\n                {tag}\n              </Link>\n            ))}\n          </div>\n        </div>\n      </div>\n      \n      {/* 学習完了セクション */}\n      <div className=\"bg-blue-50 border border-blue-100 rounded-lg p-6 mb-6\">\n        <h3 className=\"text-xl font-bold mb-4\">理解度確認</h3>\n        <p className=\"mb-4\">この教材の内容を理解できましたか？学習完了としてマークすると、学習履歴に記録され、ポイントが獲得できます。</p>\n        <button \n          onClick={markAsCompleted}\n          className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          学習完了としてマーク\n        </button>\n      </div>\n      \n      {/* 評価・コメントセクション */}\n      <div className=\"bg-white rounded-lg shadow-md p-6 mb-6\">\n        <h3 className=\"text-xl font-bold mb-4\">評価とフィードバック</h3>\n        \n        {/* 評価フォーム */}\n        <form onSubmit={submitFeedback} className=\"mb-8 p-4 border border-gray-200 rounded-lg\">\n          <h4 className=\"font-medium mb-3\">この教材を評価する</h4>\n          <div className=\"mb-4\">\n            <div className=\"flex items-center mb-2\">\n              <span className=\"mr-3\">評価：</span>\n              <div className=\"flex\">\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <button \n                    key={star} \n                    type=\"button\"\n                    onClick={() => setUserRating(star)}\n                    className={`text-2xl focus:outline-none ${userRating >= star ? 'text-yellow-500' : 'text-gray-300'}`}\n                  >\n                    ★\n                  </button>\n                ))}\n              </div>\n            </div>\n            <textarea\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n              placeholder=\"コメントを入力してください（任意）\"\n              className=\"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              rows={3}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            disabled={submitting || userRating === 0}\n            className={`px-4 py-2 bg-blue-600 text-white rounded ${\n              submitting || userRating === 0 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-blue-700'\n            }`}\n          >\n            {submitting ? '送信中...' : '評価を送信'}\n          </button>\n        </form>\n        \n        {/* 評価一覧 */}\n        <div>\n          <h4 className=\"font-medium mb-4\">フィードバック一覧</h4>\n          {feedbacks.length === 0 ? (\n            <p className=\"text-gray-500\">まだフィードバックはありません。最初の評価を投稿してみませんか？</p>\n          ) : (\n            <div className=\"space-y-6\">\n              {feedbacks.map((feedback) => (\n                <div key={feedback.id} className=\"border-b border-gray-200 pb-6 last:border-b-0\">\n                  <div className=\"flex items-start\">\n                    <div className=\"w-10 h-10 rounded-full bg-gray-200 overflow-hidden mr-4\">\n                      <img \n                        src={feedback.user_avatar || '/avatars/default.png'}\n                        alt={feedback.user_name}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center justify-between mb-1\">\n                        <div className=\"font-medium\">{feedback.user_name}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          {new Date(feedback.created_at).toLocaleDateString('ja-JP')}\n                        </div>\n                      </div>\n                      <div className=\"flex text-yellow-500 mb-2\">\n                        {[...Array(5)].map((_, i) => (\n                          <span key={i}>\n                            {i < feedback.rating ? <FaStar /> : <FaRegStar />}\n                          </span>\n                        ))}\n                      </div>\n                      <p className=\"text-gray-700\">{feedback.comment}</p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* 関連教材 */}\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <h3 className=\"text-xl font-bold mb-6\">関連教材</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {relatedMaterials.map((material) => (\n            <div key={material.id} className=\"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors\">\n              <Link href={`/materials/${material.id}`} className=\"block h-full\">\n                <h4 className=\"font-medium mb-2 hover:text-blue-600\">{material.title}</h4>\n                <div className=\"flex items-center text-sm text-gray-600 mb-2\">\n                  <span className=\"mr-3\">{material.author_name}</span>\n                  <div className=\"flex text-yellow-500\">\n                    {[...Array(5)].map((_, i) => (\n                      <span key={i} className=\"text-xs\">\n                        {i < Math.floor(material.rating) ? <FaStar /> : <FaRegStar />}\n                      </span>\n                    ))}\n                    <span className=\"ml-1 text-gray-700 text-xs\">{material.rating}</span>\n                  </div>\n                </div>\n                <div className=\"mt-2 flex gap-2\">\n                  <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs\">\n                    {material.category === 'business' ? 'ビジネス英語' : \n                     material.category === 'communication' ? 'コミュニケーション' : material.category}\n                  </span>\n                  <span className=\"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs\">\n                    {material.difficulty === 'beginner' ? '初級' : \n                     material.difficulty === 'intermediate' ? '中級' : '上級'}\n                  </span>\n                </div>\n              </Link>\n            </div>\n          ))}\n        </div>\n        <div className=\"mt-6 text-center\">\n          <Link \n            href=\"/materials\"\n            className=\"inline-flex items-center text-blue-600 hover:text-blue-800\"\n          >\n            すべての教材を見る <FaChevronRight className=\"ml-1\" />\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MaterialDetailPage; "],"names":["MaterialDetailPage","params","useParams","router","useRouter","materialId","id","material","setMaterial","useState","loading","setLoading","error","setError","feedbacks","setFeedbacks","relatedMaterials","setRelatedMaterials","isBookmarked","setIsBookmarked","userRating","setUserRating","comment","setComment","submitting","setSubmitting","useEffect","fetchMaterial","mockMaterial","title","description","content","category","difficulty","author","name","avatar","giverScore","type","created_at","view_count","rating","is_bookmarked","is_published","tags","mockFeedbacks","user_id","user_name","user_avatar","mockRelatedMaterials","author_name","err","console","toggleBookmark","submitFeedback","e","preventDefault","alert","setTimeout","newFeedback","length","Date","toISOString","markAsCompleted","div","className","svg","viewBox","fill","path","fillRule","d","clipRule","p","button","onClick","back","FaArrowLeft","h1","span","Array","map","_","i","Math","floor","FaStar","FaRegStar","FaUser","FaBookmark","FaRegBookmark","FaClock","toLocaleDateString","Link","href","img","src","alt","article","dangerouslySetInnerHTML","__html","h3","tag","index","encodeURIComponent","form","onSubmit","h4","star","textarea","value","onChange","target","placeholder","rows","disabled","feedback","FaChevronRight"],"mappings":"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"}