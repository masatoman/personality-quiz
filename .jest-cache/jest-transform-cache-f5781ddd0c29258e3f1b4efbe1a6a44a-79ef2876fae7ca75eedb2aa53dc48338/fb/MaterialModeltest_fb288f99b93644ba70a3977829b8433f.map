{"version":3,"sources":["/Users/master/Local Sites/testcursor/src/models/__tests__/MaterialModel.test.ts"],"sourcesContent":["import { validateMaterial, Material, MaterialStatus } from '../MaterialModel';\n\ndescribe('MaterialModel バリデーション', () => {\n  describe('validateMaterial', () => {\n    it('有効な教材データを検証できる', () => {\n      const validMaterial: Material = {\n        id: 'material-123',\n        title: '初級英語文法講座',\n        description: '英語の基本文法をわかりやすく解説します',\n        content: '<p>これは教材のコンテンツです</p>',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['英文法', '初級'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: new Date().toISOString(),\n        sections: [\n          {\n            id: 'section-1',\n            title: 'セクション1',\n            content: '<p>セクション1のコンテンツ</p>',\n            order: 1\n          }\n        ],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(validMaterial);\n      \n      expect(result.isValid).toBe(true);\n      expect(result.errors).toEqual([]);\n    });\n    \n    it('タイトルが空の場合にエラーを検出する', () => {\n      const invalidMaterial: Material = {\n        id: 'material-123',\n        title: '',\n        description: '英語の基本文法をわかりやすく解説します',\n        content: '<p>これは教材のコンテンツです</p>',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['英文法', '初級'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: new Date().toISOString(),\n        sections: [\n          {\n            id: 'section-1',\n            title: 'セクション1',\n            content: '<p>セクション1のコンテンツ</p>',\n            order: 1\n          }\n        ],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(invalidMaterial);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('タイトルは必須です');\n    });\n    \n    it('タイトルが長すぎる場合にエラーを検出する', () => {\n      const invalidMaterial: Material = {\n        id: 'material-123',\n        title: '非常に長いタイトル'.repeat(20), // 200文字以上\n        description: '英語の基本文法をわかりやすく解説します',\n        content: '<p>これは教材のコンテンツです</p>',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['英文法', '初級'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: new Date().toISOString(),\n        sections: [\n          {\n            id: 'section-1',\n            title: 'セクション1',\n            content: '<p>セクション1のコンテンツ</p>',\n            order: 1\n          }\n        ],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(invalidMaterial);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('タイトルは100文字以内で入力してください');\n    });\n    \n    it('説明文が長すぎる場合にエラーを検出する', () => {\n      const invalidMaterial: Material = {\n        id: 'material-123',\n        title: '初級英語文法講座',\n        description: '長い説明文'.repeat(100), // 500文字以上\n        content: '<p>これは教材のコンテンツです</p>',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['英文法', '初級'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: new Date().toISOString(),\n        sections: [\n          {\n            id: 'section-1',\n            title: 'セクション1',\n            content: '<p>セクション1のコンテンツ</p>',\n            order: 1\n          }\n        ],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(invalidMaterial);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('説明文は300文字以内で入力してください');\n    });\n    \n    it('コンテンツが空の場合にエラーを検出する', () => {\n      const invalidMaterial: Material = {\n        id: 'material-123',\n        title: '初級英語文法講座',\n        description: '英語の基本文法をわかりやすく解説します',\n        content: '',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['英文法', '初級'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: new Date().toISOString(),\n        sections: [],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(invalidMaterial);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('コンテンツは必須です');\n    });\n    \n    it('セクションの順序が重複している場合にエラーを検出する', () => {\n      const invalidMaterial: Material = {\n        id: 'material-123',\n        title: '初級英語文法講座',\n        description: '英語の基本文法をわかりやすく解説します',\n        content: '<p>これは教材のコンテンツです</p>',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['英文法', '初級'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: new Date().toISOString(),\n        sections: [\n          {\n            id: 'section-1',\n            title: 'セクション1',\n            content: '<p>セクション1のコンテンツ</p>',\n            order: 1\n          },\n          {\n            id: 'section-2',\n            title: 'セクション2',\n            content: '<p>セクション2のコンテンツ</p>',\n            order: 1 // 重複する順序\n          }\n        ],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(invalidMaterial);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('セクションの順序が重複しています');\n    });\n    \n    it('タグが多すぎる場合にエラーを検出する', () => {\n      const invalidMaterial: Material = {\n        id: 'material-123',\n        title: '初級英語文法講座',\n        description: '英語の基本文法をわかりやすく解説します',\n        content: '<p>これは教材のコンテンツです</p>',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['タグ1', 'タグ2', 'タグ3', 'タグ4', 'タグ5', 'タグ6', 'タグ7', 'タグ8', 'タグ9', 'タグ10', 'タグ11'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: new Date().toISOString(),\n        sections: [\n          {\n            id: 'section-1',\n            title: 'セクション1',\n            content: '<p>セクション1のコンテンツ</p>',\n            order: 1\n          }\n        ],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(invalidMaterial);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('タグは10個以内で設定してください');\n    });\n    \n    it('公開ステータスなのに公開日がない場合にエラーを検出する', () => {\n      const invalidMaterial: Material = {\n        id: 'material-123',\n        title: '初級英語文法講座',\n        description: '英語の基本文法をわかりやすく解説します',\n        content: '<p>これは教材のコンテンツです</p>',\n        authorId: 'user-456',\n        status: MaterialStatus.PUBLISHED,\n        category: 'grammar',\n        level: 'beginner',\n        tags: ['英文法', '初級'],\n        estimatedTime: 30,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        publishedAt: undefined, // 公開日なし\n        sections: [\n          {\n            id: 'section-1',\n            title: 'セクション1',\n            content: '<p>セクション1のコンテンツ</p>',\n            order: 1\n          }\n        ],\n        coverImageUrl: 'https://example.com/image.jpg'\n      };\n      \n      const result = validateMaterial(invalidMaterial);\n      \n      expect(result.isValid).toBe(false);\n      expect(result.errors).toContain('公開ステータスの教材には公開日が必要です');\n    });\n  });\n}); "],"names":["describe","it","validMaterial","id","title","description","content","authorId","status","MaterialStatus","PUBLISHED","category","level","tags","estimatedTime","createdAt","Date","toISOString","updatedAt","publishedAt","sections","order","coverImageUrl","result","validateMaterial","expect","isValid","toBe","errors","toEqual","invalidMaterial","toContain","repeat","undefined"],"mappings":";;;;+BAA2D;AAE3DA,SAAS,yBAAyB;IAChCA,SAAS,oBAAoB;QAC3BC,GAAG,kBAAkB;YACnB,MAAMC,gBAA0B;gBAC9BC,IAAI;gBACJC,OAAO;gBACPC,aAAa;gBACbC,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;iBAAK;gBACnBC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAa,IAAIH,OAAOC,WAAW;gBACnCG,UAAU;oBACR;wBACEjB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO;oBACT;iBACD;gBACDC,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACtB;YAEhCuB,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEC,OAAO,CAAC,EAAE;QAClC;QAEA5B,GAAG,sBAAsB;YACvB,MAAM6B,kBAA4B;gBAChC3B,IAAI;gBACJC,OAAO;gBACPC,aAAa;gBACbC,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;iBAAK;gBACnBC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAa,IAAIH,OAAOC,WAAW;gBACnCG,UAAU;oBACR;wBACEjB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO;oBACT;iBACD;gBACDC,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACM;YAEhCL,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEG,SAAS,CAAC;QAClC;QAEA9B,GAAG,wBAAwB;YACzB,MAAM6B,kBAA4B;gBAChC3B,IAAI;gBACJC,OAAO,YAAY4B,MAAM,CAAC;gBAC1B3B,aAAa;gBACbC,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;iBAAK;gBACnBC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAa,IAAIH,OAAOC,WAAW;gBACnCG,UAAU;oBACR;wBACEjB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO;oBACT;iBACD;gBACDC,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACM;YAEhCL,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEG,SAAS,CAAC;QAClC;QAEA9B,GAAG,uBAAuB;YACxB,MAAM6B,kBAA4B;gBAChC3B,IAAI;gBACJC,OAAO;gBACPC,aAAa,QAAQ2B,MAAM,CAAC;gBAC5B1B,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;iBAAK;gBACnBC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAa,IAAIH,OAAOC,WAAW;gBACnCG,UAAU;oBACR;wBACEjB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO;oBACT;iBACD;gBACDC,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACM;YAEhCL,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEG,SAAS,CAAC;QAClC;QAEA9B,GAAG,uBAAuB;YACxB,MAAM6B,kBAA4B;gBAChC3B,IAAI;gBACJC,OAAO;gBACPC,aAAa;gBACbC,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;iBAAK;gBACnBC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAa,IAAIH,OAAOC,WAAW;gBACnCG,UAAU,EAAE;gBACZE,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACM;YAEhCL,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEG,SAAS,CAAC;QAClC;QAEA9B,GAAG,8BAA8B;YAC/B,MAAM6B,kBAA4B;gBAChC3B,IAAI;gBACJC,OAAO;gBACPC,aAAa;gBACbC,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;iBAAK;gBACnBC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAa,IAAIH,OAAOC,WAAW;gBACnCG,UAAU;oBACR;wBACEjB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO;oBACT;oBACA;wBACElB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO,EAAE,SAAS;oBACpB;iBACD;gBACDC,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACM;YAEhCL,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEG,SAAS,CAAC;QAClC;QAEA9B,GAAG,sBAAsB;YACvB,MAAM6B,kBAA4B;gBAChC3B,IAAI;gBACJC,OAAO;gBACPC,aAAa;gBACbC,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAO;oBAAQ;iBAAO;gBACrFC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAa,IAAIH,OAAOC,WAAW;gBACnCG,UAAU;oBACR;wBACEjB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO;oBACT;iBACD;gBACDC,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACM;YAEhCL,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEG,SAAS,CAAC;QAClC;QAEA9B,GAAG,+BAA+B;YAChC,MAAM6B,kBAA4B;gBAChC3B,IAAI;gBACJC,OAAO;gBACPC,aAAa;gBACbC,SAAS;gBACTC,UAAU;gBACVC,QAAQC,6BAAc,CAACC,SAAS;gBAChCC,UAAU;gBACVC,OAAO;gBACPC,MAAM;oBAAC;oBAAO;iBAAK;gBACnBC,eAAe;gBACfC,WAAW,IAAIC,OAAOC,WAAW;gBACjCC,WAAW,IAAIF,OAAOC,WAAW;gBACjCE,aAAac;gBACbb,UAAU;oBACR;wBACEjB,IAAI;wBACJC,OAAO;wBACPE,SAAS;wBACTe,OAAO;oBACT;iBACD;gBACDC,eAAe;YACjB;YAEA,MAAMC,SAASC,IAAAA,+BAAgB,EAACM;YAEhCL,OAAOF,OAAOG,OAAO,EAAEC,IAAI,CAAC;YAC5BF,OAAOF,OAAOK,MAAM,EAAEG,SAAS,CAAC;QAClC;IACF;AACF"}