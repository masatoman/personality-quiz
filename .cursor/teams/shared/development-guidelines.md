# 開発ガイドライン

## 1. 共通開発プロセス

### コードの品質管理
- コミット前に必ず `npm run lint` と `npm run test` を実行
- PRは小さな単位で作成（1PR = 1機能の原則）
- コミットメッセージは[Conventional Commits](https://www.conventionalcommits.org/)に準拠

### ブランチ戦略
```
main
├── develop
│   ├── feature/client/*
│   ├── feature/api/*
│   ├── feature/db/*
│   └── feature/infra/*
├── hotfix/*
└── release/*
```

### レビュープロセス
1. PRの作成
   - タイトルは「種別: 内容」の形式
   - 説明には変更内容、テスト内容、確認項目を記載
2. レビュー依頼
   - 担当チームのレビュアーをアサイン
   - 関連チームにもレビューを依頼
3. レビュー実施
   - コードの品質確認
   - テストの十分性確認
   - パフォーマンスへの影響確認
4. マージ
   - 全てのレビューがApproveされたらマージ
   - コンフリクトがある場合は作成者が解決

## 2. コーディング規約

### 命名規則
- 変数：キャメルケース（例：`userId`）
- 定数：大文字スネークケース（例：`MAX_RETRY_COUNT`）
- コンポーネント：パスカルケース（例：`UserProfile`）
- ファイル名：機能を表す名詞（例：`UserRepository.ts`）

### TypeScript
- 型定義は明示的に行う
- any型の使用は原則禁止
- インターフェースを積極的に活用
- ジェネリクスは適切に使用

### React
- フックスの命名は use プレフィックス
- コンポーネントは純粋関数として実装
- 副作用は useEffect 内でのみ実行
- Props は型定義必須

### テスト
- ユニットテストは必須
- テストカバレッジ80%以上を目標
- E2Eテストは主要フローをカバー
- テストデータは専用ディレクトリに配置

## 3. ドキュメント管理

### 必須ドキュメント
- README.md：プロジェクト概要
- API仕様書：OpenAPI形式
- データベース定義書：ER図含む
- インフラ構成図：システム構成を図示

### ドキュメント更新のタイミング
- 機能追加・変更時
- バグ修正時（影響範囲大の場合）
- レビュー指摘対応時
- リリース前

## 4. 品質管理

### 必須チェック項目
- TypeScriptコンパイルエラーなし
- ESLintエラーなし
- テスト成功
- ビルド成功
- 型定義の整合性

### パフォーマンス基準
- ページロード：3秒以内
- APIレスポンス：1秒以内
- Lighthouse スコア：90以上

### セキュリティ対策
- 認証・認可の適切な実装
- 入力値の適切なバリデーション
- 機密情報の適切な管理
- 定期的な脆弱性チェック

## 5. 問題解決フロー

### バグ発生時
1. 問題の切り分け
2. 影響範囲の特定
3. 一時対応の検討
4. 恒久対応の実装
5. テストの追加
6. ドキュメントの更新

### パフォーマンス問題
1. プロファイリング実施
2. ボトルネック特定
3. 改善策の検討
4. 改善の実装
5. 効果測定

### セキュリティ問題
1. 影響範囲の特定
2. 一時的な対策実施
3. 根本原因の分析
4. 恒久対策の実装
5. 再発防止策の策定 